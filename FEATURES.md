# üìã –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## 1. –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (`/bookings`)

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π** - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, –æ—Ç–º–µ–Ω–µ–Ω–æ, –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ
- **–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ—Ç–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü–µ—Ä–µ–Ω–æ—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –Ω–∞ –Ω–æ–≤—ã–µ

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
1. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "üìÖ –ò—Å—Ç–æ—Ä–∏—è" –≤ –º–µ–Ω—é
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ "–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏" –∏–ª–∏ "–û—Ç–º–µ–Ω–∏—Ç—å"

### API Endpoints:

#### –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```
GET /api/bookings/list
Headers: Authorization: Bearer {accessToken}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "bookings": [
    {
      "id": "...",
      "userId": "...",
      "barber": "–ò–≤–∞–Ω",
      "service": "–°—Ç—Ä–∏–∂–∫–∞",
      "date": "2026-01-30",
      "time": "15:00",
      "email": "user@example.com",
      "phone": "+7...",
      "status": "confirmed",
      "notes": null,
      "createdAt": "2026-01-28T...",
      "updatedAt": "2026-01-28T..."
    }
  ]
}
```

#### –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```
POST /api/bookings/cancel
Headers: Authorization: Bearer {accessToken}
Body: {
  "bookingId": "...",
  "notes": "–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
}
```

#### –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```
POST /api/bookings/reschedule
Headers: Authorization: Bearer {accessToken}
Body: {
  "bookingId": "...",
  "date": "2026-02-01",
  "time": "16:00",
  "notes": "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
}
```

---

## 2. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (`/admin`)

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤—Å–µ–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ, –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π** - —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–≤—Å–µ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, –æ—Ç–º–µ–Ω–µ–Ω–æ)
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`isAdmin: true`)
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω" –≤ –º–µ–Ω—é (–≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º)
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —Ç–∞–±–ª–∏—Ü—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
4. –ù–∞–∂–∏–º–∞–π—Ç–µ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### API Endpoint:

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)
```
GET /api/admin/bookings
Headers: Authorization: Bearer {accessToken}
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `isAdmin: true`

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "bookings": [
    {
      "id": "...",
      "userId": "...",
      "barber": "–ò–≤–∞–Ω",
      "service": "–°—Ç—Ä–∏–∂–∫–∞",
      "date": "2026-01-30",
      "time": "15:00",
      "email": "user@example.com",
      "phone": "+7...",
      "status": "confirmed",
      "notes": null,
      "createdAt": "2026-01-28T...",
      "updatedAt": "2026-01-28T...",
      "user": {
        "id": "...",
        "email": "user@example.com",
        "name": "–ò–º—è",
        "haircutCount": 5,
        "isAdmin": false,
        "createdAt": "2026-01-20T..."
      }
    }
  ],
  "total": 15
}
```

---

## 3. –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–∞:

- **confirmed** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ (–∞–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **cancelled** - –û—Ç–º–µ–Ω–µ–Ω–æ (–æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **rescheduled** - –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ (—É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ notes)

---

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª—å Booking

```prisma
model Booking {
  id        String   @id @default(cuid())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String
  barber    String
  service   String
  date      String
  time      String
  email     String
  phone     String
  status    String   @default("confirmed")
  notes     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ User

- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `isAdmin: Boolean @default(false)` - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å `bookings: Booking[]` - –¥–ª—è —Å–≤—è–∑–∏ —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏

---

## 5. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
```javascript
const response = await fetch('/api/bookings/list', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  }
});
const data = await response.json();
console.log(data.bookings);
```

### –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
const response = await fetch('/api/bookings/cancel', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    bookingId: 'booking-id-here',
    notes: '–û—Ç–º–µ–Ω—è—é –ø–æ –ø—Ä–∏—á–∏–Ω–µ...'
  })
});
const data = await response.json();
```

### –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
const response = await fetch('/api/bookings/reschedule', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    bookingId: 'booking-id-here',
    date: '2026-02-15',
    time: '14:00',
    notes: '–ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è'
  })
});
const data = await response.json();
```

---

## 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤—Ä—É—á–Ω—É—é, –æ–±–Ω–æ–≤–∏—Ç–µ –ø–æ–ª–µ `isAdmin` –≤ –ë–î:

```sql
UPDATE User SET isAdmin = true WHERE email = 'admin@example.com';
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Prisma:
```javascript
await prisma.user.update({
  where: { email: 'admin@example.com' },
  data: { isAdmin: true }
});
```

---

## 7. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **BookingHistory.jsx** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **AdminDashboard.jsx** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã: **Header.jsx** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## 8. –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- `/bookings` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `/admin` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

---

–í—Å—ë –≥–æ—Ç–æ–≤–æ! üéâ
